<p-card header="Nuevo {{ action }}">
  <div
    class="border-round-lg px-1 py-5 gap-0 lg:p-6"
    [ngClass]="actionType == 'income' ? 'bg-green-50' : 'bg-red-50'"
  >
    <form class="m-3" [formGroup]="form" id="ngForm">
      <div class="flex flex-column gap-1">
        <app-currency-field
          (out_selection)="onSelectCurrency($event)"
          [in_amount]="form.controls['amount'].value"
          [in_currency]="form.controls['currency'].value"
        ></app-currency-field>
        <p-divider></p-divider>

        <span>
          <h5>Realizado</h5>
          <p-inputSwitch
            inputId="completedSwitch"
            formControlName="completed"
          ></p-inputSwitch>
        </span>
        <p-divider></p-divider>

        <span class="mt-3">
          <span class="p-float-label">
            <p-calendar
              formControlName="date_of_transaction"
              [showIcon]="true"
              inputId="calendar"
              [(ngModel)]="form_date"
            ></p-calendar>
            <label for="calendar">Fecha de transacción</label>
          </span>
        </span>
        <p-divider></p-divider>

        <span class="mt-2">
          <span class="p-float-label">
            <input
              id="description-input"
              formControlName="description"
              type="text"
              pInputText
            />
            <label for="description-input">Descripción</label>
          </span>
        </span>
        <p-divider></p-divider>

        <span>
          <h5>{{ action }} Fijo</h5>
          <p-inputSwitch
            inputId="recurrentSwitch"
            formControlName="recurrent"
            (click)="onRecurrentToggle()"
          ></p-inputSwitch>
        </span>
        <p-divider></p-divider>

        <app-repetition-field
          (out_selection)="onRepetitionSelect($event)"
        ></app-repetition-field>
        <p-divider></p-divider>

        <span class="mt-2">
          <span class="p-float-label">
            <input
              id="notes-input"
              formControlName="notes"
              type="text"
              pInputText
            />
            <label for="notes-input">Notas</label>
          </span>
        </span>
        <p-divider></p-divider>

        <span class="mt-2">
          <app-category-picker
            [transactionType]="actionType"
            (selection)="onCategorySelection($event)"
          ></app-category-picker>
        </span>
        <p-divider></p-divider>

        <span>
          <h5>Ignorar</h5>
          <p-inputSwitch
            inputId="ignoreSwitch"
            formControlName="ignore"
          ></p-inputSwitch>
        </span>
        <p-divider></p-divider>
      </div>
    </form>
  </div>

  <ng-template pTemplate="footer">
    <span class="p-buttonset">
      <button
        pButton
        pRipple
        label="Guardar"
        icon="pi pi-check"
        (click)="onSubmitForm()"
      ></button>
      <button pButton pRipple label="Eliminar" icon="pi pi-trash"></button>
      <button
        pButton
        pRipple
        label="Limpiar"
        icon="pi pi-times"
        (click)="onClearForm()"
      ></button>
    </span>
  </ng-template>
</p-card>
